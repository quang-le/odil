# Odil, syntax highlighting for .emil files

[EMIL](https://github.com/pousse-cafe/pousse-cafe/wiki/Introduction-to-EMIL), Extended Messaging Intermediate Language is an extended version of [MIL](https://github.com/jelster/CqrsMessagingTools/wiki/MIL-Walkthrough), which is generated by [the Poussecafe framework](https://github.com/pousse-cafe). It's very helpful but a bit dry to parse for human eyes.
Odil is a [TextMate grammar](https://macromates.com/manual/en/language_grammars) for EMIL schemas saved on files with .emil extension (as generated by poussecafe in the near future).
There is a small extension for use with VSCode, as well as guidelines to install the grammar on Eclipse. You can also just download the grammar and use it with any other editor of choice.

There is also a zsh script to generate an emil file and open it in the IDE of your choice (well, if you're using VSCode or Eclipse).

## Installing VSCode extension

You can get it on the [MarketPlace](https://marketplace.visualstudio.com/items?itemName=Quang.odil), or download the [odil-0.0.1.vsix file](https://github.com/quang-le/odil/blob/master/odil-0.0.1.vsix), then run the command:

`code --install-extension odil-0.0.1.vsix`

## Installing on Eclipse

Follow the instructions in [this guide](https://github.com/quang-le/odil/blob/master/add_grammar_eclipse.md)

## Other IDEs

Download the [grammar file](https://github.com/quang-le/odil/blob/master/vscode/odil-extension/syntaxes/emil.tmLanguage.json) and follow the procedure of your IDE.

Unfortunately, the grammar is currently available in `.json` format only

## Using the script (zsh only)

Download the [emil script](https://github.com/quang-le/odil/blob/master/emil). Add it to your `$PATH` and give it permissions by running `chmod 755 [path to emil script]` in your terminal.

The script needs to be run in the root folder of the project for which you wish to generate the `.emil` file.

You can simply run : `emil`, and the script will generate a file `current.emil`in your project source folder, then open it with VSCode

### Specify file name:

`emil [path-to-folder/file-name-without-extension]`. For example: `emil ~/emil/current_project_schema` will generate a file called `current-project-schema.emil` in the folder `~/emil/`

### Specify IDE

With Eclipse and VSCode only.

`emil eclipse path-to-folder/file-name` will create your file, and open it with Eclipse. For this to work, you will need to save the path to the eclipse executable in an environment variable named `$ECLIPSE`. Without second argument, it will generate a `current.emil` file, like the default setting.

## Next improvements

[ ] Have the syntax in `.xml` format

[ ] Have dedicated script for each IDE

[ ] Optimize grammar for all themes
